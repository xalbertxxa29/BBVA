<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Formulario</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="overlay" id="globalOverlay"><div class="neo-overlay"></div></div>

  <header class="header">
    <div class="title">
      <button id="menu-btn" class="menu-btn" aria-label="Abrir menú">☰</button>
      <h1>Formulario</h1>
    </div>
    <p id="fecha"></p>
  </header>

  <nav id="side-menu" class="side-menu" aria-label="Menú lateral">
    <div class="user-details">
      <p id="user-name"></p>
      <p id="user-email"></p>
    </div>
    <ul>
      <li><a href="menu.html">Mis Tareas</a></li>
      <li><a href="#">Historial</a></li>
    </ul>
    <hr>
    <button id="logout-btn" class="btn btn-danger logout-btn">Cerrar Sesión</button>
  </nav>

  <main>
    <button id="emergency-btn" class="btn btn-ghost" style="position:fixed; right:16px; bottom:calc(84px + var(--safe-bottom)); z-index:10">
      Recargar Datos
    </button>

    <section class="form-container card">
      <div class="form-section">
        <h3 style="margin-top:0">Datos del Cliente</h3>

        <div class="form-group">
          <label for="buscarCliente">Buscar Cliente</label>
          <select id="buscarCliente"></select>
        </div>

        <div class="form-group">
          <label for="buscarUnidad">Unidad</label>
          <select id="buscarUnidad"></select>
        </div>

        <div class="form-group"><label for="dniRuc">DNI o RUC</label><input id="dniRuc" placeholder="DNI o RUC" disabled /></div>
        <div class="form-group"><label for="departamento">Departamento</label><input id="departamento" placeholder="Departamento" disabled /></div>
        <div class="form-group"><label for="distrito">Distrito</label><input id="distrito" placeholder="Distrito" disabled /></div>
        <div class="form-group"><label for="direccion">Dirección</label><input id="direccion" placeholder="Dirección" disabled /></div>
        <div class="form-group"><label for="latitud">Latitud</label><input id="latitud" placeholder="Latitud" disabled /></div>
        <div class="form-group"><label for="longitud">Longitud</label><input id="longitud" placeholder="Longitud" disabled /></div>
        <div class="form-group"><label for="tipoTarea">Tipo de Tarea</label><input id="tipoTarea" placeholder="Tipo de Tarea" disabled /></div>

        <div class="form-group">
          <label for="ubicaciones-mapa">Mapa</label>
          <div id="ubicaciones-mapa"></div>
        </div>
      </div>
    </section>

    <div class="btn-row">
      <button id="cancelar" class="btn btn-ghost btn-cancel">Cancelar</button>
      <button id="enviar" class="btn btn-danger btn-submit" disabled>Enviar</button>
    </div>
  </main>

  <!-- Firebase SDKs y config separada -->
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-storage-compat.js"></script>
  <script src="firebase-config.js"></script>

  <script src="formulariocaj.js"></script>
  <!-- Reemplaza por tu clave de Maps -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDlOoCAxAvWK5kpBkmnefd5dC62ns8v1pU&callback=initMap"></script>
</body>
</html>
